/**
* author : biner
* date : 2013-05-30
* desc : 后台提示插件
*/
var ToolTips = {
    /*载入*/
    show:function(config){
        //判断是否加载jquery
        if (typeof jQuery == 'undefined') { alert('Tips:Please load the jquery framework!');return false; }
        config = config || {};
        //合并默认配置
        for (var i in this._config) {
            if (config[i] === undefined) {
                 config[i] = this._config[i];
            };
        };
        //更新全局配置
        this._config = config; 
        this._config.bgcolor = this._bgcolor();
        $('#'+this._config.id).length>0 ? this._remove() : false;
        $("body").prepend(this._templete());
        
        $('#'+this._config.id).css({
            'top':this._config.starttop+'px',
            'font-size':this._config.fontsize+'px',
            'height':this._config.tipheight+'px',
            'line-height':(this._config.tipheight-5)+'px',
            'border-color':this._config.bgcolor,
            'width':$('#'+this._config.id).width()+'px'
        });
        
        this._open();
        this._config.href ? this._jumpUrl() : false;
        this._config.time>0 ? this.close() : false;
        config = null; 
    },
    _templete:function(){
        return '<span id="'+this._config.id+'" style="position:fixed;_position:absolute;left:0%;z-index:999999;text-align:center;opacity:0;filter:alpha(opacity=0);padding:0 10px 5px 10px;border:2px solid;color:#000;background-color:#fff;-webkit-box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, .6);-moz-box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, .6);-ms-box-shadow:1px 1px 3px 0 rgba(0, 0, 0, .6);-o-box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, .6);box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, .6);filter:progid:DXImageTransform.Microsoft.Shadow(color=#9D9D9D,direction=145,strength=2);" >'+this._config.info+' <button type="button" class="close" data-dismiss="alert" style="line-height:30px;margin-left:5px" onclick="$(\'#'+this._config.id+'\').remove();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></span>';
    },
    /*打开tips*/
    _open:function(){
        var textWidth = $('#'+this._config.id).width()+50;
        var marginL = '-'+(textWidth/2)+'px';
            switch(this._config.appear){
               case 1:
                    $('#'+this._config.id).animate({
                      opacity: this._config.opacity,
                      top: this._config.endtop+'px'
                    }, 500).css({width:textWidth,left:'50%',marginLeft:marginL});
                break;
                case 2:
                    $('#'+this._config.id).animate({
                      opacity: this._config.opacity,
                      left: '50%',
                      marginLeft:marginL
                    }, 500).css({width:textWidth});
                break;
            }
    },
    /*隐藏tips*/
    close:function(){
          var obj = this;
          switch(this._config.appear){
            case 1:
                $('#'+this._config.id).delay(this._config.time*1000).animate({
                    opacity: 0,
                    top: '100%'
                }, 500, function() { obj._remove(); });
            break;
            case 2:
                $('#'+this._config.id).delay(this._config.time*1000).animate({
                    opacity: 0,
                    left: '100%'
                }, 500, function() { obj._remove(); });
            break;
          }
    },
    /*移除tips*/
    _remove:function(){
         $("#"+this._config.id).remove();
    },
    /*跳转url*/
    _jumpUrl:function(){
       window.open(this._config.href,this._config.target);
       this._config.href = null;
    },
    /*背景颜色*/
    _bgcolor:function(){
        switch(this._config.type){
            case 1: this._config.bgcolor = '#5884B7'; break;
            case 2: this._config.bgcolor = '#35A309'; break;
            case 3: this._config.bgcolor = '#D45914'; break;
        }
        return this._config.bgcolor;
    },
    /*默认配置*/
    _config:{
        id:'tips',                  //默认消息ID
        type:1,                     //消息类型[1:普通提示,2:成功,3:失败]
        info:'Loading...',          //提示信息
        href:null,                  //刷新地址
        time:8,                     //显示时间
        opacity:0.9,                //透明度
        target:'default-main-iframe',//打开方式
        tipheight:35,               //高度 px
        starttop:300,                //距离顶端高度(开始) px
        endtop:10,                   //距离顶端高度(结束) px
        fontsize:14,                //字体大小 px
        bgcolor:'#5884B7',          //背景颜色
        appear:1,                   //动画效果
        fun:''                      //回调
    }
}